{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\nimport { fireCancelableEvent } from '../internal/events';\nimport { nodeBelongs } from '../internal/utils/node-belongs';\nimport FileInputItem from './file-input-item';\nimport IconButtonItem from './icon-button-item';\nimport IconToggleButtonItem from './icon-toggle-button-item.js';\nimport MenuDropdownItem from './menu-dropdown-item';\nimport styles from './styles.css.js';\nconst ItemElement = forwardRef(({\n  item,\n  dropdownExpandToViewport,\n  tooltip,\n  setTooltip,\n  onItemClick,\n  onFilesChange\n}, ref) => {\n  const containerRef = useRef(null);\n  const itemRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n      (_a = itemRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }));\n  useEffect(() => {\n    if ((tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) !== item.id) {\n      return;\n    }\n    const close = () => {\n      setTooltip(null);\n    };\n    const handlePointerDownEvent = event => {\n      var _a;\n      if (event.target && ((_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.contains(event.target))) {\n        return;\n      }\n      close();\n    };\n    const handleKeyDownEvent = event => {\n      if (event.key === 'Escape') {\n        close();\n      }\n    };\n    window.addEventListener('pointerdown', handlePointerDownEvent);\n    window.addEventListener('keydown', handleKeyDownEvent);\n    return () => {\n      window.removeEventListener('pointerdown', handlePointerDownEvent);\n      window.removeEventListener('keydown', handleKeyDownEvent);\n    };\n  }, [item.id, tooltip, setTooltip]);\n  const onShowTooltipSoft = show => {\n    if (!(tooltip === null || tooltip === void 0 ? void 0 : tooltip.feedback)) {\n      setTooltip(show ? {\n        item: item.id,\n        feedback: false\n      } : null);\n    }\n  };\n  const onShowTooltipHard = show => {\n    if (!show && item.id !== (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item)) {\n      return;\n    }\n    setTooltip(show ? {\n      item: item.id,\n      feedback: false\n    } : null);\n  };\n  const onClickHandler = event => {\n    const hasPopoverFeedback = 'popoverFeedback' in item && item.popoverFeedback;\n    if (hasPopoverFeedback) {\n      setTooltip({\n        item: item.id,\n        feedback: true\n      });\n    }\n    fireCancelableEvent(onItemClick, event.detail, event);\n  };\n  const onFilesChangeHandler = event => {\n    fireCancelableEvent(onFilesChange, event.detail, event);\n    setTooltip(null);\n  };\n  return React.createElement(\"div\", {\n    key: item.id,\n    className: styles['item-wrapper'],\n    ref: containerRef,\n    onPointerEnter: () => onShowTooltipSoft(true),\n    onPointerLeave: () => onShowTooltipSoft(false),\n    onFocus: event => {\n      // Showing no tooltip when the focus comes from inside the container.\n      // This is needed to prevent the tooltip after a menu closes with item selection or Escape.\n      if (event && event.relatedTarget && nodeBelongs(containerRef.current, event.relatedTarget)) {\n        return;\n      }\n      onShowTooltipHard(true);\n    },\n    onBlur: () => onShowTooltipHard(false)\n  }, item.type === 'icon-button' && React.createElement(IconButtonItem, {\n    ref: itemRef,\n    item: item,\n    onItemClick: onClickHandler,\n    showTooltip: (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) === item.id,\n    showFeedback: !!(tooltip === null || tooltip === void 0 ? void 0 : tooltip.feedback)\n  }), item.type === 'icon-toggle-button' && React.createElement(IconToggleButtonItem, {\n    ref: itemRef,\n    item: item,\n    onItemClick: onClickHandler,\n    showTooltip: (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) === item.id,\n    showFeedback: !!(tooltip === null || tooltip === void 0 ? void 0 : tooltip.feedback)\n  }), item.type === 'icon-file-input' && React.createElement(FileInputItem, {\n    ref: itemRef,\n    item: item,\n    onFilesChange: onFilesChangeHandler,\n    showTooltip: (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) === item.id\n  }), item.type === 'menu-dropdown' && React.createElement(MenuDropdownItem, {\n    ref: itemRef,\n    item: item,\n    showTooltip: (tooltip === null || tooltip === void 0 ? void 0 : tooltip.item) === item.id,\n    onItemClick: onClickHandler,\n    expandToViewport: dropdownExpandToViewport\n  }));\n});\nexport default ItemElement;","map":{"version":3,"names":["React","forwardRef","useEffect","useImperativeHandle","useRef","fireCancelableEvent","nodeBelongs","FileInputItem","IconButtonItem","IconToggleButtonItem","MenuDropdownItem","styles","ItemElement","item","dropdownExpandToViewport","tooltip","setTooltip","onItemClick","onFilesChange","ref","containerRef","itemRef","focus","_a","current","id","close","handlePointerDownEvent","event","target","contains","handleKeyDownEvent","key","window","addEventListener","removeEventListener","onShowTooltipSoft","show","feedback","onShowTooltipHard","onClickHandler","hasPopoverFeedback","popoverFeedback","detail","onFilesChangeHandler","createElement","className","onPointerEnter","onPointerLeave","onFocus","relatedTarget","onBlur","type","showTooltip","showFeedback","expandToViewport"],"sources":["C:\\Users\\tanne\\Desktop\\Bright Path Analytics\\Education-Planning-Assistant-App\\frontend\\node_modules\\src\\button-group\\item-element.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\n\nimport { ButtonProps } from '../button/interfaces.js';\nimport { fireCancelableEvent, NonCancelableEventHandler } from '../internal/events';\nimport { nodeBelongs } from '../internal/utils/node-belongs';\nimport FileInputItem from './file-input-item';\nimport IconButtonItem from './icon-button-item';\nimport IconToggleButtonItem from './icon-toggle-button-item.js';\nimport { ButtonGroupProps } from './interfaces';\nimport MenuDropdownItem from './menu-dropdown-item';\n\nimport styles from './styles.css.js';\n\ninterface ItemElementProps {\n  item: ButtonGroupProps.Item;\n  dropdownExpandToViewport?: boolean;\n  tooltip: null | { item: string; feedback: boolean };\n  setTooltip: (tooltip: null | { item: string; feedback: boolean }) => void;\n  onItemClick?: NonCancelableEventHandler<ButtonGroupProps.ItemClickDetails> | undefined;\n  onFilesChange?: NonCancelableEventHandler<ButtonGroupProps.FilesChangeDetails> | undefined;\n}\n\nconst ItemElement = forwardRef(\n  (\n    { item, dropdownExpandToViewport, tooltip, setTooltip, onItemClick, onFilesChange }: ItemElementProps,\n    ref: React.Ref<ButtonProps.Ref>\n  ) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const itemRef = useRef<HTMLButtonElement | HTMLInputElement>(null);\n\n    useImperativeHandle(ref, () => ({\n      focus: () => {\n        itemRef.current?.focus();\n      },\n    }));\n\n    useEffect(() => {\n      if (tooltip?.item !== item.id) {\n        return;\n      }\n\n      const close = () => {\n        setTooltip(null);\n      };\n\n      const handlePointerDownEvent = (event: PointerEvent) => {\n        if (event.target && containerRef.current?.contains(event.target as HTMLElement)) {\n          return;\n        }\n\n        close();\n      };\n\n      const handleKeyDownEvent = (event: KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          close();\n        }\n      };\n\n      window.addEventListener('pointerdown', handlePointerDownEvent);\n      window.addEventListener('keydown', handleKeyDownEvent);\n\n      return () => {\n        window.removeEventListener('pointerdown', handlePointerDownEvent);\n        window.removeEventListener('keydown', handleKeyDownEvent);\n      };\n    }, [item.id, tooltip, setTooltip]);\n\n    const onShowTooltipSoft = (show: boolean) => {\n      if (!tooltip?.feedback) {\n        setTooltip(show ? { item: item.id, feedback: false } : null);\n      }\n    };\n\n    const onShowTooltipHard = (show: boolean) => {\n      if (!show && item.id !== tooltip?.item) {\n        return;\n      }\n\n      setTooltip(show ? { item: item.id, feedback: false } : null);\n    };\n\n    const onClickHandler = (event: CustomEvent<ButtonGroupProps.ItemClickDetails>) => {\n      const hasPopoverFeedback = 'popoverFeedback' in item && item.popoverFeedback;\n\n      if (hasPopoverFeedback) {\n        setTooltip({ item: item.id, feedback: true });\n      }\n\n      fireCancelableEvent(onItemClick, event.detail, event);\n    };\n\n    const onFilesChangeHandler = (event: CustomEvent<ButtonGroupProps.FilesChangeDetails>) => {\n      fireCancelableEvent(onFilesChange, event.detail, event);\n\n      setTooltip(null);\n    };\n\n    return (\n      <div\n        key={item.id}\n        className={styles['item-wrapper']}\n        ref={containerRef}\n        onPointerEnter={() => onShowTooltipSoft(true)}\n        onPointerLeave={() => onShowTooltipSoft(false)}\n        onFocus={event => {\n          // Showing no tooltip when the focus comes from inside the container.\n          // This is needed to prevent the tooltip after a menu closes with item selection or Escape.\n          if (event && event.relatedTarget && nodeBelongs(containerRef.current, event.relatedTarget)) {\n            return;\n          }\n          onShowTooltipHard(true);\n        }}\n        onBlur={() => onShowTooltipHard(false)}\n      >\n        {item.type === 'icon-button' && (\n          <IconButtonItem\n            ref={itemRef}\n            item={item}\n            onItemClick={onClickHandler}\n            showTooltip={tooltip?.item === item.id}\n            showFeedback={!!tooltip?.feedback}\n          />\n        )}\n        {item.type === 'icon-toggle-button' && (\n          <IconToggleButtonItem\n            ref={itemRef}\n            item={item}\n            onItemClick={onClickHandler}\n            showTooltip={tooltip?.item === item.id}\n            showFeedback={!!tooltip?.feedback}\n          />\n        )}\n        {item.type === 'icon-file-input' && (\n          <FileInputItem\n            ref={itemRef}\n            item={item}\n            onFilesChange={onFilesChangeHandler}\n            showTooltip={tooltip?.item === item.id}\n          />\n        )}\n        {item.type === 'menu-dropdown' && (\n          <MenuDropdownItem\n            ref={itemRef}\n            item={item}\n            showTooltip={tooltip?.item === item.id}\n            onItemClick={onClickHandler}\n            expandToViewport={dropdownExpandToViewport}\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nexport default ItemElement;\n"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,mBAAmB,EAAEC,MAAM,QAAQ,OAAO;AAGjF,SAASC,mBAAmB,QAAmC,oBAAoB;AACnF,SAASC,WAAW,QAAQ,gCAAgC;AAC5D,OAAOC,aAAa,MAAM,mBAAmB;AAC7C,OAAOC,cAAc,MAAM,oBAAoB;AAC/C,OAAOC,oBAAoB,MAAM,8BAA8B;AAE/D,OAAOC,gBAAgB,MAAM,sBAAsB;AAEnD,OAAOC,MAAM,MAAM,iBAAiB;AAWpC,MAAMC,WAAW,GAAGX,UAAU,CAC5B,CACE;EAAEY,IAAI;EAAEC,wBAAwB;EAAEC,OAAO;EAAEC,UAAU;EAAEC,WAAW;EAAEC;AAAa,CAAoB,EACrGC,GAA+B,KAC7B;EACF,MAAMC,YAAY,GAAGhB,MAAM,CAAiB,IAAI,CAAC;EACjD,MAAMiB,OAAO,GAAGjB,MAAM,CAAuC,IAAI,CAAC;EAElED,mBAAmB,CAACgB,GAAG,EAAE,OAAO;IAC9BG,KAAK,EAAEA,CAAA,KAAK;;MACV,CAAAC,EAAA,GAAAF,OAAO,CAACG,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAED,KAAK,EAAE;IAC1B;GACD,CAAC,CAAC;EAEHpB,SAAS,CAAC,MAAK;IACb,IAAI,CAAAa,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEF,IAAI,MAAKA,IAAI,CAACY,EAAE,EAAE;MAC7B;;IAGF,MAAMC,KAAK,GAAGA,CAAA,KAAK;MACjBV,UAAU,CAAC,IAAI,CAAC;IAClB,CAAC;IAED,MAAMW,sBAAsB,GAAIC,KAAmB,IAAI;;MACrD,IAAIA,KAAK,CAACC,MAAM,KAAI,CAAAN,EAAA,GAAAH,YAAY,CAACI,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEO,QAAQ,CAACF,KAAK,CAACC,MAAqB,CAAC,GAAE;QAC/E;;MAGFH,KAAK,EAAE;IACT,CAAC;IAED,MAAMK,kBAAkB,GAAIH,KAAoB,IAAI;MAClD,IAAIA,KAAK,CAACI,GAAG,KAAK,QAAQ,EAAE;QAC1BN,KAAK,EAAE;;IAEX,CAAC;IAEDO,MAAM,CAACC,gBAAgB,CAAC,aAAa,EAAEP,sBAAsB,CAAC;IAC9DM,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEH,kBAAkB,CAAC;IAEtD,OAAO,MAAK;MACVE,MAAM,CAACE,mBAAmB,CAAC,aAAa,EAAER,sBAAsB,CAAC;MACjEM,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEJ,kBAAkB,CAAC;IAC3D,CAAC;EACH,CAAC,EAAE,CAAClB,IAAI,CAACY,EAAE,EAAEV,OAAO,EAAEC,UAAU,CAAC,CAAC;EAElC,MAAMoB,iBAAiB,GAAIC,IAAa,IAAI;IAC1C,IAAI,EAACtB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEuB,QAAQ,GAAE;MACtBtB,UAAU,CAACqB,IAAI,GAAG;QAAExB,IAAI,EAAEA,IAAI,CAACY,EAAE;QAAEa,QAAQ,EAAE;MAAK,CAAE,GAAG,IAAI,CAAC;;EAEhE,CAAC;EAED,MAAMC,iBAAiB,GAAIF,IAAa,IAAI;IAC1C,IAAI,CAACA,IAAI,IAAIxB,IAAI,CAACY,EAAE,MAAKV,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEF,IAAI,GAAE;MACtC;;IAGFG,UAAU,CAACqB,IAAI,GAAG;MAAExB,IAAI,EAAEA,IAAI,CAACY,EAAE;MAAEa,QAAQ,EAAE;IAAK,CAAE,GAAG,IAAI,CAAC;EAC9D,CAAC;EAED,MAAME,cAAc,GAAIZ,KAAqD,IAAI;IAC/E,MAAMa,kBAAkB,GAAG,iBAAiB,IAAI5B,IAAI,IAAIA,IAAI,CAAC6B,eAAe;IAE5E,IAAID,kBAAkB,EAAE;MACtBzB,UAAU,CAAC;QAAEH,IAAI,EAAEA,IAAI,CAACY,EAAE;QAAEa,QAAQ,EAAE;MAAI,CAAE,CAAC;;IAG/CjC,mBAAmB,CAACY,WAAW,EAAEW,KAAK,CAACe,MAAM,EAAEf,KAAK,CAAC;EACvD,CAAC;EAED,MAAMgB,oBAAoB,GAAIhB,KAAuD,IAAI;IACvFvB,mBAAmB,CAACa,aAAa,EAAEU,KAAK,CAACe,MAAM,EAAEf,KAAK,CAAC;IAEvDZ,UAAU,CAAC,IAAI,CAAC;EAClB,CAAC;EAED,OACEhB,KAAA,CAAA6C,aAAA;IACEb,GAAG,EAAEnB,IAAI,CAACY,EAAE;IACZqB,SAAS,EAAEnC,MAAM,CAAC,cAAc,CAAC;IACjCQ,GAAG,EAAEC,YAAY;IACjB2B,cAAc,EAAEA,CAAA,KAAMX,iBAAiB,CAAC,IAAI,CAAC;IAC7CY,cAAc,EAAEA,CAAA,KAAMZ,iBAAiB,CAAC,KAAK,CAAC;IAC9Ca,OAAO,EAAErB,KAAK,IAAG;MACf;MACA;MACA,IAAIA,KAAK,IAAIA,KAAK,CAACsB,aAAa,IAAI5C,WAAW,CAACc,YAAY,CAACI,OAAO,EAAEI,KAAK,CAACsB,aAAa,CAAC,EAAE;QAC1F;;MAEFX,iBAAiB,CAAC,IAAI,CAAC;IACzB,CAAC;IACDY,MAAM,EAAEA,CAAA,KAAMZ,iBAAiB,CAAC,KAAK;EAAC,GAErC1B,IAAI,CAACuC,IAAI,KAAK,aAAa,IAC1BpD,KAAA,CAAA6C,aAAA,CAACrC,cAAc;IACbW,GAAG,EAAEE,OAAO;IACZR,IAAI,EAAEA,IAAI;IACVI,WAAW,EAAEuB,cAAc;IAC3Ba,WAAW,EAAE,CAAAtC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEF,IAAI,MAAKA,IAAI,CAACY,EAAE;IACtC6B,YAAY,EAAE,CAAC,EAACvC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEuB,QAAQ;EAAA,EAEpC,EACAzB,IAAI,CAACuC,IAAI,KAAK,oBAAoB,IACjCpD,KAAA,CAAA6C,aAAA,CAACpC,oBAAoB;IACnBU,GAAG,EAAEE,OAAO;IACZR,IAAI,EAAEA,IAAI;IACVI,WAAW,EAAEuB,cAAc;IAC3Ba,WAAW,EAAE,CAAAtC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEF,IAAI,MAAKA,IAAI,CAACY,EAAE;IACtC6B,YAAY,EAAE,CAAC,EAACvC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEuB,QAAQ;EAAA,EAEpC,EACAzB,IAAI,CAACuC,IAAI,KAAK,iBAAiB,IAC9BpD,KAAA,CAAA6C,aAAA,CAACtC,aAAa;IACZY,GAAG,EAAEE,OAAO;IACZR,IAAI,EAAEA,IAAI;IACVK,aAAa,EAAE0B,oBAAoB;IACnCS,WAAW,EAAE,CAAAtC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEF,IAAI,MAAKA,IAAI,CAACY;EAAE,EAEzC,EACAZ,IAAI,CAACuC,IAAI,KAAK,eAAe,IAC5BpD,KAAA,CAAA6C,aAAA,CAACnC,gBAAgB;IACfS,GAAG,EAAEE,OAAO;IACZR,IAAI,EAAEA,IAAI;IACVwC,WAAW,EAAE,CAAAtC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEF,IAAI,MAAKA,IAAI,CAACY,EAAE;IACtCR,WAAW,EAAEuB,cAAc;IAC3Be,gBAAgB,EAAEzC;EAAwB,EAE7C,CACG;AAEV,CAAC,CACF;AAED,eAAeF,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}